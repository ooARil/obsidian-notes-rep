
![[Pasted image 20240128160251.png]]
Этапы:
1. *BeanDefinitions*: На вход приходит BeanDefinition (т.е. мета-ифнормация по созданию бина (а именно: способ инициализации (конструктор, фабричный метод, сэттер) и т.д. ))
2. *SortedBeanDefinitions*: Сортировка BeanDefinition:
	Пояснение:
	![[Pasted image 20240128160444.png]]
	Т.к. у нас есть бины, в которые внедряются в качестве зависимости другие бины, то существует следующий порядок:
		1. Сначала будут создаваться те бины, которые не от чего зависят (т.е., в который ничего не нужно внедрять, например: bean "driver")
		2. Потом создаются бины последовательно, до бина, который является последний в цепочке (т.е. тот, который никуда не нужно внедрять, например: bean "companyRepository")
3. *For each Bean Definition*: Цикл for-each по всем BeanDefinition в порядке, заданном в пункте 2:
	1. *Bean contsructor called*: Создание бина или внедрение зависимостей через конструктор (или фабричный метод). Обязательно идет этот этап, т.к. только с помощью конструктора можем создать объект
	2. *Setter called*: И только после создания объекта через конструктор, идет внедрение зависимостей через сэттер-методы.
4. *Beans*: И в итоге на выходе у нас получаются готовые бины.

Замечание: Пункты 2-4 проходят в IoC контейнере, а пункт 1 проходит в BeanFactory.