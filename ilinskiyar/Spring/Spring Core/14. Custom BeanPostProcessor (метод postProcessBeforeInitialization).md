Создадим аннотацию, которая внедряет объект, над которым она стоит в объект класса, в котором данный объект находится:
![[Pasted image 20240211183541.png]]

Для это создадим аннотацию @InjectBean:
![[Pasted image 20240211183603.png]]
Замечание: Она обязательно должна работать в RUNTIME.


И создадим BeanPostProcessor, который будет проверять все бины с помощью Reflection API:
1. Выводить весь список полей класса, типом которого является бин.
2. У каждого поля проверять, стоит ли над ним аннотация
3. Если аннотация стоит то сделать следующие действия:
	   1. Получить из контекста бин по типу данного поля.
	   2. Поле сделать доступным, чтобы можно было в него положить значение.
	   3. Засэтать в это поле полученный бин из контекста.
![[Pasted image 20240211184000.png]]
Пояснение: Для шага 3.1. используем контекст, который получаем с помощью внедрения зависимости через интерфейс осведомитель Aware ([[13. Интерфейс осведомитель Aware]])

И получаем результат:
![[Pasted image 20240211184313.png]]
Пояснение: Т.е. когда на бин companyRepository по жизненному циклу бина был вызван BPP, у его поля connectionPool оказался аннотация @InjectBean, после чего в это после просто засэтали бин, который нашли по типу это поля из контекста.