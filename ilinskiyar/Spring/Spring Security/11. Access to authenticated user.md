Мы можем получить информацию об пользователе прошедшего аутентификацию разными способами:
- `SecurityContextHolder` [[2. Authentication Filter - Architecture#Модель хранения пользователя]]:
	![[Pasted image 20240519141152.png]]

- `@CurrentSecurityContext` - также `SecurityContext` мы можем получить с помощью аннотации:
	![[Pasted image 20240519141945.png]]
	![[Pasted image 20240519141959.png]]

- `@AuthenticationPrincipal` - также мы можем получать только информацию о пользователе `UserDetails`:
	![[Pasted image 20240519142229.png]]
	![[Pasted image 20240519142239.png]]
	Пояснение: Password - null, т.к. после успешной аутентификации пароль пользователя чиститься (чтобы не гулял по всему приложению).

- `Principal` - также мы можем просто указать `Principal` в параметрах метода контроллера:
	![[Pasted image 20240519142456.png]]
	![[Pasted image 20240519142505.png]]


---

### Thymeleaf + Spring Secuirty

Помимо выше перечисленных способов к пользователю прошедшего аутентификацию мы можем получить доступ и на наших формах (например: отобразить какие-то конкретные кнопки и т.д.).

У Spring Secuirty есть такая возможность при интеграции с Thymeleaf. Для этого нужно добавить следующую зависимость:
![[Pasted image 20240519143111.png]]

Отобразим на форме имя пользователя, который прошел аутентификацию:
![[Pasted image 20240519143500.png]]
Пояснение: Т.е. теперь как только подключена эта зависимость, у нас есть доступ к объекту `Authenticiation` и `Authorization`:
![[Pasted image 20240519143637.png]]
- `authentication` - через него мы можем получить всю информацию об пользователе:
	![[Pasted image 20240519143751.png]]

- `authroization` - через него мы можем получить `Authenticiation` и с помощью SpEL проверить права доступа:
	![[Pasted image 20240519143841.png]]


Теперь мы видим имя аутентифицированного пользователя:
![[Pasted image 20240519144007.png]]